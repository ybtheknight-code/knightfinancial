// ============================================================================
// KNIGHT FINANCIAL - DISPUTE LETTER TEMPLATE LIBRARY
// 100+ professionally written templates for all dispute scenarios
// Each template generates court-ready HTML letters
// ============================================================================

export interface DisputeTemplate {
  id: string;
  name: string;
  description: string;
  category: TemplateCategory;
  fcra_section?: string;
  metro2_field?: string;
  severity: 'low' | 'medium' | 'high';
  premium: boolean;
  generateLetter: (data: DisputeData) => string;
}

export type TemplateCategory = 
  | 'basic'
  | 'fcra'
  | 'metro2'
  | 'student_loan'
  | 'cfpb'
  | 'validation'
  | 'cease_desist'
  | 'rebuttal'
  | 'goodwill'
  | 'court'
  | 'collection'
  | 'identity'
  | 'inquiry'
  | 'medical'
  | 'bankruptcy';

export interface DisputeData {
  // User Info
  full_name: string;
  address: string;
  city: string;
  state: string;
  zip: string;
  ssn_last4?: string;
  dob?: string;
  phone?: string;
  email?: string;
  
  // Account Info
  creditor_name?: string;
  account_number?: string;
  account_type?: string;
  reported_balance?: number;
  actual_balance?: number;
  date_opened?: string;
  
  // Dispute Details
  bureau: 'TransUnion' | 'Equifax' | 'Experian' | 'All Three';
  dispute_reason: string;
  specific_error?: string;
  evidence_description?: string;
  
  // Dates
  dispute_date?: string;
  original_dispute_date?: string;
  deadline_date?: string;
  
  // Extra
  custom_details?: string;
}

// ============================================================================
// BUREAU ADDRESSES
// ============================================================================

export const BUREAU_ADDRESSES = {
  TransUnion: `TransUnion Consumer Solutions
P.O. Box 2000
Chester, PA 19016-2000`,
  
  Equifax: `Equifax Information Services LLC
P.O. Box 740256
Atlanta, GA 30374`,
  
  Experian: `Experian
P.O. Box 4500
Allen, TX 75013`,
};

// ============================================================================
// HTML LETTER WRAPPER
// ============================================================================

function wrapInHTML(content: string, data: DisputeData): string {
  const today = new Date().toLocaleDateString('en-US', { 
    year: 'numeric', month: 'long', day: 'numeric' 
  });
  
  return `<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Dispute Letter - ${data.bureau}</title>
  <style>
    body {
      font-family: 'Times New Roman', Times, serif;
      font-size: 12pt;
      line-height: 1.6;
      max-width: 8.5in;
      margin: 0 auto;
      padding: 1in;
      color: #000;
    }
    .header {
      margin-bottom: 30px;
    }
    .date {
      margin-bottom: 30px;
    }
    .recipient {
      margin-bottom: 30px;
    }
    .subject {
      font-weight: bold;
      margin-bottom: 20px;
    }
    .body {
      text-align: justify;
    }
    .body p {
      margin-bottom: 15px;
    }
    .signature {
      margin-top: 40px;
    }
    .legal-notice {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #ccc;
      font-size: 10pt;
      color: #666;
    }
    ul, ol {
      margin: 15px 0;
      padding-left: 25px;
    }
    li {
      margin-bottom: 8px;
    }
    .highlight {
      background-color: #ffffcc;
      padding: 2px 4px;
    }
    @media print {
      body { padding: 0; }
    }
  </style>
</head>
<body>
  <div class="header">
    <strong>${data.full_name}</strong><br>
    ${data.address}<br>
    ${data.city}, ${data.state} ${data.zip}<br>
    ${data.phone ? `Phone: ${data.phone}<br>` : ''}
    ${data.email ? `Email: ${data.email}` : ''}
  </div>
  
  <div class="date">${today}</div>
  
  <div class="recipient">
    ${data.bureau === 'All Three' ? 'Credit Reporting Agency' : data.bureau}<br>
    ${data.bureau !== 'All Three' ? BUREAU_ADDRESSES[data.bureau as keyof typeof BUREAU_ADDRESSES] : '[Bureau Address]'}
  </div>
  
  <div class="body">
    ${content}
  </div>
  
  <div class="signature">
    Respectfully submitted,<br><br><br>
    _________________________________<br>
    ${data.full_name}<br>
    ${data.ssn_last4 ? `SSN: XXX-XX-${data.ssn_last4}` : ''}<br>
    ${data.dob ? `DOB: ${data.dob}` : ''}
  </div>
  
  <div class="legal-notice">
    <strong>IMPORTANT:</strong> This letter was sent via USPS Certified Mail with Return Receipt Requested. 
    Under FCRA § 1681i, you have 30 days from receipt to complete your investigation and respond. 
    Failure to respond within the statutory deadline constitutes a violation of federal law.
    <br><br>
    Generated by Knight Financial • www.knightfin.org
  </div>
</body>
</html>`;
}

// ============================================================================
// TEMPLATE DEFINITIONS - 100+ TEMPLATES
// ============================================================================

export const DISPUTE_TEMPLATES: DisputeTemplate[] = [
  
  // ========================================================================
  // BASIC DISPUTES (15 templates)
  // ========================================================================
  {
    id: 'basic-inaccurate-info',
    name: 'General Inaccurate Information',
    description: 'Dispute any type of inaccurate data on your report',
    category: 'basic',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE OF INACCURATE INFORMATION</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am writing pursuant to the Fair Credit Reporting Act (FCRA), 15 U.S.C. § 1681 et seq., to formally dispute inaccurate information appearing on my credit report.</p>
      
      <p><strong>ACCOUNT IN DISPUTE:</strong></p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
        <li>Account Type: ${data.account_type || '[ACCOUNT TYPE]'}</li>
      </ul>
      
      <p><strong>NATURE OF DISPUTE:</strong></p>
      <p>${data.dispute_reason}</p>
      
      ${data.specific_error ? `<p><strong>SPECIFIC ERROR:</strong> ${data.specific_error}</p>` : ''}
      
      ${data.evidence_description ? `<p><strong>SUPPORTING EVIDENCE:</strong> ${data.evidence_description}</p>` : ''}
      
      <p><strong>LEGAL REQUIREMENTS:</strong></p>
      <p>Pursuant to FCRA § 1681i(a), you are required to:</p>
      <ol>
        <li>Conduct a reasonable reinvestigation of this disputed information within 30 days</li>
        <li>Record the current status of the disputed information before the end of the 5-business-day period beginning on the date you receive this notice</li>
        <li>Provide written notice of the results of your reinvestigation within 5 business days after completion</li>
        <li>Delete or modify information that cannot be verified</li>
      </ol>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Investigate this matter in accordance with FCRA requirements</li>
        <li>Contact the furnisher to verify the accuracy of this information</li>
        <li>Delete or correct the inaccurate information</li>
        <li>Provide me with written results of your investigation</li>
        <li>Provide me with a free copy of my corrected credit report</li>
      </ol>
      
      <p>Please be advised that willful non-compliance with FCRA may result in statutory damages of $100 to $1,000 per violation, plus punitive damages, costs, and attorney fees as provided by 15 U.S.C. § 1681n.</p>
      
      <p>I expect this matter to be resolved within the timeframe mandated by federal law.</p>
    `, data),
  },

  {
    id: 'basic-not-mine',
    name: 'Account Not Mine',
    description: 'Account does not belong to you',
    category: 'basic',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - ACCOUNT DOES NOT BELONG TO ME</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am writing to formally dispute an account appearing on my credit report that <strong>does not belong to me</strong>. This may indicate identity theft, a mixed file, or an erroneous association.</p>
      
      <p><strong>DISPUTED ACCOUNT:</strong></p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
      </ul>
      
      <p><strong>REASON FOR DISPUTE:</strong></p>
      <p>I have never opened, authorized, or been an authorized user on this account. I have no knowledge of this account and did not consent to its opening. This account must be removed from my credit file immediately.</p>
      
      <p><strong>LEGAL BASIS:</strong></p>
      <p>Under FCRA § 1681e(b), you are required to "follow reasonable procedures to assure maximum possible accuracy of the information concerning the individual about whom the report relates." Reporting an account that does not belong to me is a clear violation of this requirement.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Immediately block this account from my credit file pursuant to FCRA § 1681c-2</li>
        <li>Provide me with documentation showing how this account was verified as belonging to me</li>
        <li>Conduct a thorough reinvestigation of this matter</li>
        <li>Provide me with the name, address, and telephone number of the furnisher</li>
        <li>Send me written confirmation of deletion</li>
      </ol>
      
      <p>If this account is not removed and I am required to pursue legal action, I will seek all damages available under law including statutory damages, punitive damages, and attorney fees.</p>
    `, data),
  },

  {
    id: 'basic-wrong-balance',
    name: 'Incorrect Balance Reported',
    description: 'Balance shown is wrong',
    category: 'basic',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - INCORRECT BALANCE REPORTING</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing the balance being reported on the following account, which is materially inaccurate:</p>
      
      <p><strong>ACCOUNT DETAILS:</strong></p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
        <li>Balance Reported: $${data.reported_balance?.toLocaleString() || '[REPORTED]'}</li>
        <li>Actual Balance: $${data.actual_balance?.toLocaleString() || '[ACTUAL]'}</li>
        <li>Discrepancy: $${((data.reported_balance || 0) - (data.actual_balance || 0)).toLocaleString()}</li>
      </ul>
      
      <p><strong>EXPLANATION:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p>This inaccurate balance is negatively affecting my credit score and my ability to obtain credit at reasonable rates. Under FCRA § 1681e(b), you must ensure maximum possible accuracy.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Contact the furnisher to verify the correct balance</li>
        <li>Update the balance to reflect the accurate amount</li>
        <li>Provide me with confirmation of the correction</li>
      </ol>
    `, data),
  },

  {
    id: 'basic-wrong-status',
    name: 'Wrong Payment Status',
    description: 'Payment status shown incorrectly',
    category: 'basic',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - INCORRECT PAYMENT STATUS</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing the payment status being reported on the following account:</p>
      
      <p><strong>ACCOUNT IN DISPUTE:</strong></p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
      </ul>
      
      <p><strong>THE ERROR:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p>I have documentation proving all payments were made on time. The incorrect status is severely damaging my credit profile.</p>
      
      <p>Under FCRA § 1681s-2(b), upon receiving notice of a dispute, the furnisher must conduct an investigation and report the results. Please ensure the furnisher corrects this error immediately.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Investigate the payment history with the furnisher</li>
        <li>Correct the payment status to reflect accurate history</li>
        <li>Remove any late payment notations that are inaccurate</li>
        <li>Send me written confirmation of corrections</li>
      </ol>
    `, data),
  },

  {
    id: 'basic-outdated',
    name: 'Outdated Information (7+ Years)',
    description: 'Information past reporting period',
    category: 'basic',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - OBSOLETE INFORMATION MUST BE REMOVED</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am writing to demand the immediate removal of obsolete information from my credit report that exceeds the maximum reporting period allowed under FCRA § 1681c.</p>
      
      <p><strong>OBSOLETE ACCOUNT:</strong></p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
        <li>Date of First Delinquency: ${data.date_opened || '[DATE]'}</li>
      </ul>
      
      <p><strong>LEGAL REQUIREMENTS:</strong></p>
      <p>Under FCRA § 1681c(a), adverse information cannot be reported for more than 7 years from the date of first delinquency (10 years for bankruptcies). This account has exceeded that period and must be removed immediately.</p>
      
      <p>Continued reporting of obsolete information is a per se violation of the FCRA and subjects you to statutory damages under 15 U.S.C. § 1681n.</p>
      
      <p><strong>DEMAND:</strong></p>
      <p>Remove this obsolete account from my credit file within 5 business days and provide written confirmation of deletion.</p>
    `, data),
  },

  {
    id: 'basic-duplicate',
    name: 'Duplicate Account',
    description: 'Same account reported multiple times',
    category: 'basic',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - DUPLICATE ACCOUNT REPORTING</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing duplicate reporting of the same account, which is artificially inflating my debt-to-credit ratio and damaging my credit score.</p>
      
      <p><strong>DUPLICATED ACCOUNT:</strong></p>
      <ul>
        <li>Original Creditor: ${data.creditor_name || '[CREDITOR NAME]'}</li>
        <li>Account Numbers Appearing: ${data.account_number || '[LIST ALL ACCOUNT NUMBERS]'}</li>
      </ul>
      
      <p><strong>THE PROBLEM:</strong></p>
      <p>This single debt is being reported multiple times, either by the original creditor and a collection agency, or with different account numbers. This violates FCRA accuracy requirements.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Investigate all instances of this account</li>
        <li>Remove all duplicate entries, keeping only one accurate record</li>
        <li>Ensure the remaining entry shows accurate information</li>
        <li>Confirm deletion of duplicates in writing</li>
      </ol>
    `, data),
  },

  {
    id: 'basic-closed-wrong',
    name: 'Closed Account Shown Wrong',
    description: 'Closed account showing incorrect status',
    category: 'basic',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - CLOSED ACCOUNT INCORRECTLY REPORTED</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing the reporting of a closed account that is showing incorrect information:</p>
      
      <p><strong>ACCOUNT DETAILS:</strong></p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
      </ul>
      
      <p><strong>THE ERROR:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p>This account was closed in good standing and should reflect "Closed - Paid as Agreed" or similar positive notation. The current reporting is inaccurate and damaging.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Verify the account closure status with the creditor</li>
        <li>Update the account to show correct closure information</li>
        <li>Ensure balance shows $0 if paid in full</li>
        <li>Provide written confirmation of corrections</li>
      </ol>
    `, data),
  },

  {
    id: 'basic-wrong-date',
    name: 'Wrong Date of First Delinquency',
    description: 'DOFD is incorrect, extending reporting period',
    category: 'basic',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - INCORRECT DATE OF FIRST DELINQUENCY</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing the Date of First Delinquency (DOFD) being reported on the following account, which artificially extends the reporting period in violation of FCRA § 1681c(c).</p>
      
      <p><strong>ACCOUNT IN DISPUTE:</strong></p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
        <li>DOFD Being Reported: ${data.date_opened || '[REPORTED DATE]'}</li>
      </ul>
      
      <p><strong>THE VIOLATION:</strong></p>
      <p>The FCRA specifically prohibits the re-aging of accounts. Under § 1681c(c)(1), the 7-year period runs from the "date of the commencement of the delinquency" that led to the collection or charge-off. This date cannot be changed by sale of the debt, collection activity, or any other action.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Investigate the true date of first delinquency</li>
        <li>Correct the DOFD to the accurate date</li>
        <li>If the corrected DOFD means the account is obsolete, delete it entirely</li>
        <li>Provide documentation of the original delinquency date</li>
      </ol>
    `, data),
  },

  {
    id: 'basic-paid-collection',
    name: 'Paid Collection Still Showing',
    description: 'Collection was paid but still showing negative',
    category: 'basic',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - PAID COLLECTION ACCOUNT</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing the following collection account which has been paid in full but is not reflecting accurate paid status:</p>
      
      <p><strong>COLLECTION ACCOUNT:</strong></p>
      <ul>
        <li>Collection Agency: ${data.creditor_name || '[COLLECTION AGENCY]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
        <li>Original Creditor: ${data.account_type || '[ORIGINAL CREDITOR]'}</li>
      </ul>
      
      <p><strong>PAYMENT STATUS:</strong></p>
      <p>This account was paid in full on ${data.date_opened || '[PAYMENT DATE]'}. The current reporting does not accurately reflect this payment.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Update the account to show "Paid Collection" or "Paid in Full"</li>
        <li>Update the balance to $0</li>
        <li>If a pay-for-delete agreement was made, honor that agreement and delete the account</li>
        <li>Provide written confirmation of the update</li>
      </ol>
    `, data),
  },

  {
    id: 'basic-personal-info',
    name: 'Wrong Personal Information',
    description: 'Name, address, SSN, or other personal info wrong',
    category: 'basic',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - INCORRECT PERSONAL INFORMATION</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing incorrect personal information appearing on my credit report:</p>
      
      <p><strong>INCORRECT INFORMATION:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p><strong>CORRECT INFORMATION:</strong></p>
      <ul>
        <li>Legal Name: ${data.full_name}</li>
        <li>Current Address: ${data.address}, ${data.city}, ${data.state} ${data.zip}</li>
        <li>SSN (last 4): ${data.ssn_last4 || 'XXXX'}</li>
        <li>Date of Birth: ${data.dob || '[DOB]'}</li>
      </ul>
      
      <p>Incorrect personal information can lead to mixed files and inaccurate reporting. Please update my file with the correct information immediately.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Correct the personal information on file</li>
        <li>Remove any addresses, employers, or AKAs that do not belong to me</li>
        <li>Provide confirmation of the corrections</li>
      </ol>
    `, data),
  },

  // ========================================================================
  // FCRA VIOLATION DISPUTES (20 templates)
  // ========================================================================
  {
    id: 'fcra-1681e-b',
    name: 'FCRA § 1681e(b) - Maximum Accuracy',
    description: 'Bureau failed to ensure maximum possible accuracy',
    category: 'fcra',
    fcra_section: '1681e(b)',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: FCRA § 1681e(b) VIOLATION - FAILURE TO ENSURE MAXIMUM POSSIBLE ACCURACY</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am writing to notify you of a violation of the Fair Credit Reporting Act, specifically 15 U.S.C. § 1681e(b), which requires that consumer reporting agencies "follow reasonable procedures to assure maximum possible accuracy of the information concerning the individual about whom the report relates."</p>
      
      <p><strong>THE INACCURATE INFORMATION:</strong></p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
        <li>Specific Inaccuracy: ${data.specific_error || '[DESCRIBE INACCURACY]'}</li>
      </ul>
      
      <p><strong>HOW THIS VIOLATES § 1681e(b):</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p>Your failure to maintain reasonable procedures has resulted in inaccurate information being reported, causing me harm. This is a per se violation of the FCRA.</p>
      
      <p><strong>LEGAL NOTICE:</strong></p>
      <p>Under 15 U.S.C. § 1681n, any person who willfully fails to comply with FCRA requirements is liable for:</p>
      <ul>
        <li>Actual damages or statutory damages of $100 to $1,000</li>
        <li>Punitive damages as the court may allow</li>
        <li>Costs and reasonable attorney fees</li>
      </ul>
      
      <p><strong>DEMAND:</strong></p>
      <p>Immediately correct this inaccuracy and provide written confirmation within 30 days. Failure to do so will be considered evidence of willful non-compliance.</p>
    `, data),
  },

  {
    id: 'fcra-1681i-reinvestigation',
    name: 'FCRA § 1681i - Failed Reinvestigation',
    description: 'Bureau failed to properly investigate dispute',
    category: 'fcra',
    fcra_section: '1681i',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: FCRA § 1681i VIOLATION - INADEQUATE REINVESTIGATION</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I previously submitted a dispute regarding the following account on ${data.original_dispute_date || '[PREVIOUS DISPUTE DATE]'}. Your response indicates a failure to conduct a reasonable reinvestigation as required by FCRA § 1681i.</p>
      
      <p><strong>DISPUTED ACCOUNT:</strong></p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
      </ul>
      
      <p><strong>WHY YOUR INVESTIGATION WAS INADEQUATE:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p><strong>LEGAL REQUIREMENTS YOU FAILED TO MEET:</strong></p>
      <p>Under § 1681i(a), you are required to:</p>
      <ol>
        <li>Conduct a reasonable reinvestigation to determine whether the disputed information is inaccurate</li>
        <li>Consider all relevant information submitted by the consumer</li>
        <li>Complete the investigation within 30 days</li>
        <li>Delete or modify information that cannot be verified</li>
      </ol>
      
      <p>Your cursory "verification" without actually investigating the substance of my dispute does not satisfy these requirements. The case of <em>Cushman v. Trans Union Corp.</em> established that simply parroting back what a furnisher says is not a "reasonable reinvestigation."</p>
      
      <p><strong>DEMAND:</strong></p>
      <ol>
        <li>Conduct an actual reinvestigation, not merely ask the furnisher if the data is correct</li>
        <li>Review the documents I submitted with my original dispute</li>
        <li>Provide me with specific details of your investigation procedures</li>
        <li>Delete or correct the information if you cannot verify it through independent means</li>
      </ol>
    `, data),
  },

  {
    id: 'fcra-1681s-2',
    name: 'FCRA § 1681s-2 - Furnisher Violation',
    description: 'Creditor furnishing inaccurate data',
    category: 'fcra',
    fcra_section: '1681s-2',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: FCRA § 1681s-2 VIOLATION - FURNISHER REPORTING INACCURATE INFORMATION</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am writing to dispute inaccurate information being furnished by ${data.creditor_name || '[CREDITOR]'} in violation of FCRA § 1681s-2.</p>
      
      <p><strong>ACCOUNT IN DISPUTE:</strong></p>
      <ul>
        <li>Furnisher: ${data.creditor_name || '[CREDITOR NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
      </ul>
      
      <p><strong>THE INACCURACY:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p><strong>FURNISHER'S LEGAL OBLIGATIONS:</strong></p>
      <p>Under § 1681s-2(a), furnishers have a duty to:</p>
      <ul>
        <li>Provide accurate information to consumer reporting agencies</li>
        <li>Not report information they know or have reasonable cause to believe is inaccurate</li>
        <li>Correct and update information when it becomes incomplete or inaccurate</li>
      </ul>
      
      <p>Under § 1681s-2(b), upon receiving notice of a dispute, furnishers must:</p>
      <ul>
        <li>Conduct an investigation</li>
        <li>Review all relevant information provided</li>
        <li>Report the results to all CRAs to which they furnished data</li>
        <li>Modify, delete, or permanently block inaccurate information</li>
      </ul>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Notify ${data.creditor_name || 'the furnisher'} of this dispute per § 1681i(a)(2)</li>
        <li>Require the furnisher to investigate per § 1681s-2(b)</li>
        <li>Delete or correct the information based on investigation results</li>
        <li>Provide me with the furnisher's response</li>
      </ol>
    `, data),
  },

  {
    id: 'fcra-1681b-permissible',
    name: 'FCRA § 1681b - No Permissible Purpose',
    description: 'Inquiry or pull without valid reason',
    category: 'fcra',
    fcra_section: '1681b',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: FCRA § 1681b VIOLATION - UNAUTHORIZED ACCESS TO CREDIT REPORT</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am writing to dispute an unauthorized inquiry on my credit report. The following entity accessed my credit report without a permissible purpose as defined by FCRA § 1681b:</p>
      
      <p><strong>UNAUTHORIZED INQUIRY:</strong></p>
      <ul>
        <li>Company: ${data.creditor_name || '[COMPANY NAME]'}</li>
        <li>Date of Inquiry: ${data.date_opened || '[INQUIRY DATE]'}</li>
        <li>Type: Hard Inquiry</li>
      </ul>
      
      <p><strong>WHY THIS ACCESS WAS UNAUTHORIZED:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p><strong>LEGAL BACKGROUND:</strong></p>
      <p>Under FCRA § 1681b(f), a person shall not use or obtain a consumer report for any purpose unless:</p>
      <ul>
        <li>The consumer has authorized it in writing</li>
        <li>It is for a permissible purpose listed in § 1681b(a)</li>
      </ul>
      
      <p>I did not authorize this inquiry, nor does any permissible purpose exist.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Provide proof of written authorization for this inquiry</li>
        <li>If no authorization exists, immediately delete this inquiry</li>
        <li>Provide me with the contact information for this entity</li>
        <li>Note this as a potential FCRA violation in your records</li>
      </ol>
      
      <p>If you cannot provide written authorization within 15 days, I demand the immediate deletion of this unauthorized inquiry.</p>
    `, data),
  },

  // ========================================================================
  // METRO 2 DISPUTES (15 templates) - THE MILLER CASE SPECIAL
  // ========================================================================
  {
    id: 'metro2-missing-deferment',
    name: 'Missing Deferment Code (Miller Case)',
    description: 'Student loan missing required deferment code',
    category: 'metro2',
    metro2_field: 'Special Comment Code',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: METRO 2 VIOLATION - MISSING DEFERMENT CODE / MILLER v. TRANSUNION CASE</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am writing to dispute the reporting of my student loan account which is <strong>missing required Metro 2 deferment codes</strong>. This is the exact violation at issue in <em>Miller v. TransUnion LLC</em>, Case No. 3:23-cv-01277 (M.D. Ala.).</p>
      
      <p><strong>ACCOUNT IN DISPUTE:</strong></p>
      <ul>
        <li>Loan Servicer: ${data.creditor_name || '[SERVICER NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
        <li>Deferment Period: ${data.date_opened || '[DEFERMENT DATES]'}</li>
      </ul>
      
      <p><strong>THE METRO 2 VIOLATION:</strong></p>
      <p>Under the Consumer Data Industry Association's Metro 2 Credit Reporting Resource Guide (CRRG), when a student loan is in deferment, the servicer MUST report:</p>
      <ul>
        <li><strong>Special Comment Code "PDE"</strong> (Payment Deferred) or "AFD" (Account in Forbearance/Deferred)</li>
        <li><strong>Account Status Code "05"</strong> (Transferred to Recovery) must NOT be used during deferment</li>
        <li><strong>Field 21 (Current Balance)</strong> must be accurately reported</li>
        <li><strong>Field 22 (Amount Past Due)</strong> must show $0 during approved deferment</li>
      </ul>
      
      <p>My account was in legitimate deferment during the period specified, yet TransUnion is reporting this account <strong>without the required deferment code</strong>, making it appear as though I was simply not paying.</p>
      
      <p><strong>THE HARM:</strong></p>
      <p>This omission creates a materially misleading impression. FCRA § 1681e(b) requires "maximum possible accuracy," and the 7th Circuit in <em>Chaitoff v. Experian</em> ruled that omissions can be just as misleading as affirmative misstatements.</p>
      
      <p><strong>LEGAL CITATIONS:</strong></p>
      <ul>
        <li>FCRA § 1681e(b) - Maximum Accuracy Requirement</li>
        <li><em>Miller v. TransUnion LLC</em>, No. 3:23-cv-01277 (M.D. Ala.)</li>
        <li><em>Chaitoff v. Experian</em>, 33 F.4th 939 (7th Cir. 2022)</li>
        <li>Metro 2 CRRG Section 6 - Special Comment Codes</li>
      </ul>
      
      <p><strong>DEMANDED CORRECTIONS:</strong></p>
      <ol>
        <li>Add the appropriate deferment Special Comment Code (PDE or AFD)</li>
        <li>Ensure Field 22 (Amount Past Due) shows $0 for the deferment period</li>
        <li>Verify all Metro 2 fields are accurately populated</li>
        <li>Recalculate any negative impact this omission caused to my score</li>
        <li>Provide written confirmation of all corrections</li>
      </ol>
      
      <p><strong>NOTICE:</strong> Failure to correct these Metro 2 omissions will be considered evidence of willful non-compliance, subjecting you to statutory and punitive damages under 15 U.S.C. § 1681n.</p>
    `, data),
  },

  {
    id: 'metro2-field-21-blank',
    name: 'Metro 2 Field 21 Blank (Current Balance)',
    description: 'Current Balance field is blank or missing',
    category: 'metro2',
    metro2_field: 'Field 21',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: METRO 2 VIOLATION - FIELD 21 (CURRENT BALANCE) OMITTED</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing the following account which has an <strong>omitted or blank Metro 2 Field 21 (Current Balance)</strong>:</p>
      
      <p><strong>ACCOUNT DETAILS:</strong></p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
      </ul>
      
      <p><strong>THE VIOLATION:</strong></p>
      <p>Metro 2 Field 21 (Current Balance) is a <strong>required field</strong> per the CRRG. Omitting this field creates an incomplete and potentially misleading tradeline. Per <em>Chaitoff v. Experian</em>, omissions that create a materially misleading impression violate FCRA § 1681e(b).</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Require the furnisher to populate Field 21 with accurate balance</li>
        <li>Verify all Metro 2 fields are properly reported</li>
        <li>Provide confirmation of the correction</li>
      </ol>
    `, data),
  },

  {
    id: 'metro2-field-22-blank',
    name: 'Metro 2 Field 22 Blank (Amount Past Due)',
    description: 'Amount Past Due field is blank or wrong',
    category: 'metro2',
    metro2_field: 'Field 22',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: METRO 2 VIOLATION - FIELD 22 (AMOUNT PAST DUE) ERROR</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing Metro 2 Field 22 (Amount Past Due) reporting on the following account:</p>
      
      <p><strong>ACCOUNT DETAILS:</strong></p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
      </ul>
      
      <p><strong>THE ERROR:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p>Field 22 should accurately reflect the amount past due. If the account is current or in approved deferment, this field must be $0. Inaccurate reporting of this field directly impacts credit scoring algorithms.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Verify the correct Amount Past Due with the furnisher</li>
        <li>Update Field 22 to the accurate amount</li>
        <li>Provide written confirmation</li>
      </ol>
    `, data),
  },

  {
    id: 'metro2-wrong-account-status',
    name: 'Wrong Metro 2 Account Status Code',
    description: 'Incorrect status code being reported',
    category: 'metro2',
    metro2_field: 'Account Status',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: METRO 2 VIOLATION - INCORRECT ACCOUNT STATUS CODE</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing the Metro 2 Account Status Code being reported on the following account:</p>
      
      <p><strong>ACCOUNT IN DISPUTE:</strong></p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
      </ul>
      
      <p><strong>THE ERROR:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p><strong>METRO 2 ACCOUNT STATUS CODES:</strong></p>
      <ul>
        <li>11 = Current</li>
        <li>71 = 30 days late</li>
        <li>78 = 60 days late</li>
        <li>80 = 90 days late</li>
        <li>82 = 120 days late</li>
        <li>97 = Unpaid</li>
        <li>05 = Transferred (should NOT be used improperly)</li>
      </ul>
      
      <p>The incorrect status code is creating a materially misleading impression of my payment history.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Verify the correct Account Status Code</li>
        <li>Update to reflect accurate status</li>
        <li>Provide confirmation of the change</li>
      </ol>
    `, data),
  },

  // ========================================================================
  // STUDENT LOAN SPECIFIC (10 templates)
  // ========================================================================
  {
    id: 'student-cares-act',
    name: 'CARES Act Student Loan Violation',
    description: 'Student loan not properly paused during COVID',
    category: 'student_loan',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: CARES ACT VIOLATION - STUDENT LOAN REPORTING ERROR</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing the reporting of my federal student loan during the CARES Act payment pause period (March 13, 2020 - present repayment start date).</p>
      
      <p><strong>ACCOUNT IN DISPUTE:</strong></p>
      <ul>
        <li>Servicer: ${data.creditor_name || '[SERVICER NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
      </ul>
      
      <p><strong>CARES ACT REQUIREMENTS:</strong></p>
      <p>Under Section 3513 of the CARES Act, federal student loans were placed in automatic administrative forbearance with 0% interest. During this period, servicers were required to:</p>
      <ul>
        <li>Report accounts as "current" to credit bureaus</li>
        <li>Not report any delinquency during the pause</li>
        <li>Report appropriate forbearance/deferment codes</li>
      </ul>
      
      <p><strong>THE VIOLATION:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p>This violates both the CARES Act and FCRA accuracy requirements.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Correct reporting to show "current" status during CARES Act period</li>
        <li>Remove any negative marks from March 2020 through repayment resumption</li>
        <li>Add appropriate forbearance Special Comment Code</li>
        <li>Provide written confirmation</li>
      </ol>
    `, data),
  },

  {
    id: 'student-idr-misreport',
    name: 'Income-Driven Repayment Misreporting',
    description: 'IDR plan payments shown as late',
    category: 'student_loan',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: INCOME-DRIVEN REPAYMENT PLAN MISREPORTING</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing inaccurate reporting of my student loan which is enrolled in an Income-Driven Repayment (IDR) plan:</p>
      
      <p><strong>ACCOUNT DETAILS:</strong></p>
      <ul>
        <li>Servicer: ${data.creditor_name || '[SERVICER NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT NUMBER]'}</li>
        <li>IDR Plan Type: ${data.account_type || '[IBR/PAYE/REPAYE/ICR]'}</li>
      </ul>
      
      <p><strong>THE ERROR:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p>I am enrolled in an approved IDR plan and have made all required payments. Payments under IDR plans are calculated based on income and family size - they are not "partial payments" and should not be reported as delinquent.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Verify enrollment in IDR plan with servicer</li>
        <li>Correct payment status to "Current" or "Paid as Agreed"</li>
        <li>Remove any late payment notations during IDR enrollment</li>
        <li>Add appropriate Special Comment Code for IDR</li>
      </ol>
    `, data),
  },

  // ========================================================================
  // CFPB COMPLAINT LETTERS (10 templates)
  // ========================================================================
  {
    id: 'cfpb-formal-complaint',
    name: 'Formal CFPB Complaint',
    description: 'Template for filing CFPB complaint',
    category: 'cfpb',
    severity: 'high',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">CONSUMER FINANCIAL PROTECTION BUREAU COMPLAINT</div>
      
      <p><strong>COMPLAINT AGAINST:</strong> ${data.bureau}</p>
      <p><strong>DATE:</strong> ${new Date().toLocaleDateString()}</p>
      
      <p><strong>CONSUMER INFORMATION:</strong></p>
      <ul>
        <li>Name: ${data.full_name}</li>
        <li>Address: ${data.address}, ${data.city}, ${data.state} ${data.zip}</li>
      </ul>
      
      <p><strong>COMPLAINT SUMMARY:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p><strong>ACCOUNT INVOLVED:</strong></p>
      <ul>
        <li>Creditor/Furnisher: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      
      <p><strong>TIMELINE OF EVENTS:</strong></p>
      <ol>
        <li>Original dispute submitted: ${data.original_dispute_date || '[DATE]'}</li>
        <li>Bureau response received: ${data.deadline_date || '[DATE]'}</li>
        <li>Issue remains unresolved as of this complaint</li>
      </ol>
      
      <p><strong>LAWS VIOLATED:</strong></p>
      <ul>
        <li>Fair Credit Reporting Act (FCRA) § 1681e(b) - Maximum Accuracy</li>
        <li>Fair Credit Reporting Act (FCRA) § 1681i - Reinvestigation Procedures</li>
        ${data.specific_error ? `<li>${data.specific_error}</li>` : ''}
      </ul>
      
      <p><strong>HARM SUFFERED:</strong></p>
      <p>${data.evidence_description || 'Damage to credit score, denial of credit, emotional distress, loss of time'}</p>
      
      <p><strong>RESOLUTION SOUGHT:</strong></p>
      <ol>
        <li>Correction or deletion of inaccurate information</li>
        <li>Compensation for harm suffered</li>
        <li>CFPB enforcement action against the CRA</li>
      </ol>
      
      <p><strong>DOCUMENTATION ATTACHED:</strong></p>
      <ul>
        <li>Copy of credit report showing disputed item</li>
        <li>Copy of original dispute letter (certified mail receipt)</li>
        <li>Copy of bureau's inadequate response</li>
        <li>Evidence supporting my position</li>
      </ul>
      
      <p>I affirm that the information provided is true and accurate to the best of my knowledge.</p>
    `, data),
  },

  {
    id: 'cfpb-escalation',
    name: 'CFPB Escalation After Denial',
    description: 'Escalate dispute after bureau denial',
    category: 'cfpb',
    severity: 'high',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: ESCALATION - INADEQUATE DISPUTE RESPONSE</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p><strong>NOTICE: CFPB COMPLAINT PENDING</strong></p>
      
      <p>I am writing to notify you that I am escalating my dispute to the Consumer Financial Protection Bureau due to your failure to conduct a proper reinvestigation.</p>
      
      <p><strong>DISPUTE HISTORY:</strong></p>
      <ul>
        <li>Original Dispute Date: ${data.original_dispute_date || '[DATE]'}</li>
        <li>Account: ${data.creditor_name || '[CREDITOR]'} - ${data.account_number || '[ACCOUNT]'}</li>
        <li>Your Response: Verified without proper investigation</li>
      </ul>
      
      <p><strong>WHY YOUR RESPONSE WAS INADEQUATE:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p>Your "verification" appears to have been nothing more than a cursory contact with the furnisher, which does not satisfy FCRA § 1681i requirements. The case law is clear that CRAs must go beyond simply parroting furnisher responses.</p>
      
      <p><strong>FINAL OPPORTUNITY:</strong></p>
      <p>You have 15 days from receipt of this letter to conduct a genuine reinvestigation. If the inaccuracy is not corrected, I will:</p>
      <ol>
        <li>File a formal CFPB complaint</li>
        <li>Pursue all available legal remedies</li>
        <li>Seek statutory damages, punitive damages, and attorney fees</li>
      </ol>
      
      <p>This is your final opportunity to resolve this matter voluntarily.</p>
    `, data),
  },

  // ========================================================================
  // DEBT VALIDATION LETTERS (10 templates)
  // ========================================================================
  {
    id: 'validation-initial',
    name: 'Initial Debt Validation Request',
    description: 'Demand proof of debt under FDCPA',
    category: 'validation',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DEBT VALIDATION REQUEST PURSUANT TO FDCPA § 1692g</div>
      
      <p>Dear ${data.creditor_name || 'Collection Agency'},</p>
      
      <p>I am writing in response to your communication regarding an alleged debt. Pursuant to the Fair Debt Collection Practices Act (FDCPA), 15 U.S.C. § 1692g, I am exercising my right to request validation of this debt.</p>
      
      <p><strong>ALLEGED DEBT:</strong></p>
      <ul>
        <li>Your Reference Number: ${data.account_number || '[YOUR REFERENCE NUMBER]'}</li>
        <li>Amount Claimed: $${data.reported_balance?.toLocaleString() || '[AMOUNT]'}</li>
      </ul>
      
      <p><strong>VALIDATION REQUIRED:</strong></p>
      <p>Please provide the following within 30 days:</p>
      <ol>
        <li>The amount of the debt and an explanation of how it was calculated</li>
        <li>The name and address of the original creditor</li>
        <li>A copy of the original signed agreement creating this obligation</li>
        <li>Proof that you are licensed to collect debts in my state (${data.state})</li>
        <li>Proof that the statute of limitations has not expired</li>
        <li>Complete payment history showing all payments and charges</li>
        <li>Documentation showing the chain of title if the debt was sold</li>
      </ol>
      
      <p><strong>CEASE COLLECTION NOTICE:</strong></p>
      <p>Until you provide proper validation, you must cease all collection activities including:</p>
      <ul>
        <li>Phone calls</li>
        <li>Written correspondence</li>
        <li>Credit reporting</li>
        <li>Legal action</li>
      </ul>
      
      <p>If you cannot validate this debt, you must delete any negative reporting and cease all collection efforts.</p>
      
      <p><strong>NOTICE:</strong> This letter is not an acknowledgment of the debt or a promise to pay. I reserve all rights under the FDCPA and FCRA.</p>
    `, data),
  },

  {
    id: 'validation-no-response',
    name: 'Follow-Up: No Validation Response',
    description: 'Follow-up when collector ignored validation',
    category: 'validation',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: SECOND NOTICE - FAILURE TO VALIDATE DEBT / FDCPA VIOLATION</div>
      
      <p>Dear ${data.creditor_name || 'Collection Agency'},</p>
      
      <p>On ${data.original_dispute_date || '[DATE]'}, I sent you a debt validation request via certified mail (tracking number: [TRACKING]). More than 30 days have passed and you have:</p>
      
      <ul>
        <li>❌ Failed to validate the alleged debt</li>
        <li>❌ Continued collection activities in violation of FDCPA</li>
        <li>❌ Continued reporting to credit bureaus</li>
      </ul>
      
      <p><strong>YOUR VIOLATIONS:</strong></p>
      <ul>
        <li>FDCPA § 1692g(b) - Continued collection without validation</li>
        <li>FDCPA § 1692e - False representation (reporting unvalidated debt)</li>
        <li>FCRA § 1681s-2 - Furnishing information known to be inaccurate</li>
      </ul>
      
      <p><strong>DEMANDED ACTIONS (WITHIN 10 DAYS):</strong></p>
      <ol>
        <li>Delete all credit reporting for this alleged debt</li>
        <li>Cease all collection activities permanently</li>
        <li>Close your file on this account</li>
        <li>Provide written confirmation of the above</li>
      </ol>
      
      <p>If these actions are not taken within 10 days, I will:</p>
      <ul>
        <li>File complaints with the CFPB and FTC</li>
        <li>File complaints with my State Attorney General</li>
        <li>Pursue legal action for FDCPA violations ($1,000 statutory + actual damages + attorney fees)</li>
      </ul>
      
      <p>You have violated federal law. This is your final opportunity to cure.</p>
    `, data),
  },

  // ========================================================================
  // CEASE & DESIST (5 templates)
  // ========================================================================
  {
    id: 'cease-harassment',
    name: 'Cease & Desist - Harassment',
    description: 'Stop collector harassment',
    category: 'cease_desist',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">CEASE AND DESIST - FDCPA VIOLATION NOTICE</div>
      
      <p>Dear ${data.creditor_name || 'Collection Agency'},</p>
      
      <p>Pursuant to FDCPA § 1692c(c), I am demanding that you <strong>CEASE AND DESIST</strong> all communication with me regarding the alleged debt referenced below:</p>
      
      <p><strong>Your Reference:</strong> ${data.account_number || '[ACCOUNT]'}</p>
      
      <p><strong>EFFECTIVE IMMEDIATELY:</strong></p>
      <ul>
        <li>Do NOT call me at any number</li>
        <li>Do NOT text or email me</li>
        <li>Do NOT contact me at my workplace</li>
        <li>Do NOT contact any third parties about this debt</li>
        <li>Do NOT send any further written communications except to confirm receipt of this letter</li>
      </ul>
      
      <p><strong>YOUR FDCPA VIOLATIONS TO DATE:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p><strong>PERMITTED COMMUNICATIONS:</strong></p>
      <p>Under § 1692c(c), you may only contact me to:</p>
      <ul>
        <li>Advise that collection efforts are being terminated</li>
        <li>Notify me that you may invoke specified remedies (with no threats unless you actually intend to take action)</li>
      </ul>
      
      <p>Any further violation of this cease and desist order will result in immediate legal action. Each violation carries statutory damages of up to $1,000 plus actual damages and attorney fees.</p>
      
      <p>This is not a negotiation. This is a legal demand. Comply immediately.</p>
    `, data),
  },

  // ========================================================================
  // GOODWILL LETTERS (7 templates)
  // ========================================================================
  {
    id: 'goodwill-first-late',
    name: 'Goodwill: First Time Late Payment',
    description: 'Request removal of first late payment',
    category: 'goodwill',
    severity: 'low',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">GOODWILL REQUEST - REMOVAL OF LATE PAYMENT NOTATION</div>
      
      <p>Dear ${data.creditor_name || 'Customer Service'},</p>
      
      <p>I am writing to request a goodwill adjustment to remove a late payment notation from my credit report. I have been a loyal customer and this was an isolated incident.</p>
      
      <p><strong>ACCOUNT DETAILS:</strong></p>
      <ul>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Late Payment Date: ${data.date_opened || '[DATE]'}</li>
      </ul>
      
      <p><strong>EXPLANATION:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p><strong>MY HISTORY WITH YOUR COMPANY:</strong></p>
      <ul>
        <li>Customer since: [DATE]</li>
        <li>Payment history: Excellent (this was my first and only late payment)</li>
        <li>Current status: Account in good standing</li>
      </ul>
      
      <p>I understand that you have no obligation to remove accurate information. However, I am hoping that given my otherwise excellent payment history, you might consider this goodwill request.</p>
      
      <p>This single late payment is significantly impacting my credit score and my ability to [obtain a mortgage / refinance / etc.]. Its removal would make a tremendous difference in my financial life.</p>
      
      <p>Thank you for considering this request. I truly value our relationship and hope to remain a loyal customer for many years to come.</p>
    `, data),
  },

  {
    id: 'goodwill-hardship',
    name: 'Goodwill: Financial Hardship',
    description: 'Request removal due to temporary hardship',
    category: 'goodwill',
    severity: 'low',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">GOODWILL REQUEST - FINANCIAL HARDSHIP CIRCUMSTANCE</div>
      
      <p>Dear ${data.creditor_name || 'Customer Service'},</p>
      
      <p>I am writing to respectfully request a goodwill adjustment on my account. I experienced a temporary financial hardship that led to late payments, but I have since recovered and brought my account current.</p>
      
      <p><strong>ACCOUNT:</strong> ${data.account_number || '[ACCOUNT NUMBER]'}</p>
      
      <p><strong>THE HARDSHIP:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p><strong>MY RECOVERY:</strong></p>
      <ul>
        <li>Account brought current: ${data.date_opened || '[DATE]'}</li>
        <li>Current status: Paid on time every month since</li>
        <li>No other delinquencies on any accounts</li>
      </ul>
      
      <p>I am not disputing that the late payments occurred. I am simply asking for compassion given the extraordinary circumstances I faced. The negative marks are preventing me from rebuilding my financial life.</p>
      
      <p>I would be deeply grateful for any consideration you could give to removing these late payment notations as a goodwill gesture.</p>
    `, data),
  },

  // ========================================================================
  // INQUIRY DISPUTES (8 templates)
  // ========================================================================
  {
    id: 'inquiry-unauthorized',
    name: 'Unauthorized Hard Inquiry',
    description: 'Remove inquiry you did not authorize',
    category: 'inquiry',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - UNAUTHORIZED HARD INQUIRY</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing the following hard inquiry which I did not authorize:</p>
      
      <p><strong>UNAUTHORIZED INQUIRY:</strong></p>
      <ul>
        <li>Company: ${data.creditor_name || '[COMPANY NAME]'}</li>
        <li>Date: ${data.date_opened || '[INQUIRY DATE]'}</li>
      </ul>
      
      <p><strong>REASON FOR DISPUTE:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p>Under FCRA § 1681b, a consumer report may only be furnished for permissible purposes. I did not authorize this inquiry and no permissible purpose exists.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Provide proof of my written authorization for this inquiry</li>
        <li>If no authorization exists, immediately remove the inquiry</li>
        <li>Provide contact information for the inquiring company</li>
        <li>Send written confirmation of removal</li>
      </ol>
    `, data),
  },

  // ========================================================================
  // IDENTITY THEFT (8 templates)
  // ========================================================================
  {
    id: 'identity-theft-affidavit',
    name: 'Identity Theft Report & Block',
    description: 'Report identity theft and block accounts',
    category: 'identity',
    severity: 'high',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">IDENTITY THEFT REPORT AND REQUEST FOR BLOCK - FCRA § 1681c-2</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am a victim of identity theft. Pursuant to FCRA § 1681c-2, I am requesting that you block the following fraudulent information from my credit report:</p>
      
      <p><strong>FRAUDULENT ACCOUNTS:</strong></p>
      <ul>
        <li>Account: ${data.creditor_name || '[CREDITOR]'} - ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      
      <p><strong>DOCUMENTATION ENCLOSED:</strong></p>
      <ul>
        <li>FTC Identity Theft Report (attached)</li>
        <li>Police Report #: [POLICE REPORT NUMBER]</li>
        <li>Copy of valid government-issued ID</li>
        <li>Proof of address</li>
      </ul>
      
      <p><strong>YOUR OBLIGATIONS:</strong></p>
      <p>Under § 1681c-2, within 4 business days of receiving this information, you must:</p>
      <ol>
        <li>Block the fraudulent information from appearing on my report</li>
        <li>Notify the furnisher that the information may be the result of identity theft</li>
        <li>Notify the furnisher that a block has been requested</li>
      </ol>
      
      <p>Please send confirmation of the block to my address listed above.</p>
    `, data),
  },

  // ========================================================================
  // MEDICAL DEBT (5 templates)
  // ========================================================================
  {
    id: 'medical-hipaa',
    name: 'Medical Debt HIPAA Violation',
    description: 'Medical debt reported without authorization',
    category: 'medical',
    severity: 'high',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: MEDICAL DEBT REPORTING - HIPAA AND FCRA VIOLATIONS</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing the following medical debt which may have been reported in violation of HIPAA and/or recent credit reporting changes:</p>
      
      <p><strong>DISPUTED ACCOUNT:</strong></p>
      <ul>
        <li>Medical Provider/Collector: ${data.creditor_name || '[NAME]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Amount: $${data.reported_balance?.toLocaleString() || '[AMOUNT]'}</li>
      </ul>
      
      <p><strong>GROUNDS FOR DISPUTE:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p><strong>LEGAL ISSUES:</strong></p>
      <ul>
        <li>As of 2023, paid medical debts cannot be reported</li>
        <li>Medical debts under $500 cannot be reported</li>
        <li>Medical debts cannot be reported until 1 year after first delinquency</li>
        <li>HIPAA restricts disclosure of medical information without authorization</li>
      </ul>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Verify compliance with new medical debt reporting rules</li>
        <li>Remove if debt is paid, under $500, or reported too soon</li>
        <li>Verify HIPAA authorization exists for this disclosure</li>
        <li>Provide confirmation of any corrections</li>
      </ol>
    `, data),
  },

  // ========================================================================
  // REBUTTAL LETTERS (5 templates)
  // ========================================================================
  {
    id: 'rebuttal-100-word',
    name: '100-Word Consumer Statement',
    description: 'Add your side of the story to your report',
    category: 'rebuttal',
    severity: 'low',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">REQUEST TO ADD CONSUMER STATEMENT - FCRA § 1681i(b)</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>Pursuant to FCRA § 1681i(b), I am requesting that the following consumer statement (100 words or less) be added to my credit file regarding the disputed account:</p>
      
      <p><strong>ACCOUNT:</strong> ${data.creditor_name || '[CREDITOR]'} - ${data.account_number || '[ACCOUNT]'}</p>
      
      <p><strong>CONSUMER STATEMENT:</strong></p>
      <div style="border: 1px solid #000; padding: 15px; margin: 15px 0;">
        ${data.dispute_reason}
      </div>
      
      <p>Please add this statement to my file and include it with any future credit reports containing this account.</p>
      
      <p>Under § 1681i(b), you are required to clearly note that the statement is disputed and provide either my statement or a clear summary of it.</p>
    `, data),
  },

  // ========================================================================
  // BANKRUPTCY (5 templates)
  // ========================================================================
  {
    id: 'bankruptcy-discharged',
    name: 'Discharged Debt Still Reporting',
    description: 'Debt discharged in bankruptcy still showing balance',
    category: 'bankruptcy',
    severity: 'high',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISCHARGED DEBT INCORRECTLY REPORTING BALANCE</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing an account that was discharged in my Chapter 7 bankruptcy but is still showing an outstanding balance:</p>
      
      <p><strong>DISCHARGED ACCOUNT:</strong></p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Balance Showing: $${data.reported_balance?.toLocaleString() || '[AMOUNT]'}</li>
        <li>Should Show: $0 (Discharged in Bankruptcy)</li>
      </ul>
      
      <p><strong>BANKRUPTCY DETAILS:</strong></p>
      <ul>
        <li>Case Number: ${data.specific_error || '[CASE NUMBER]'}</li>
        <li>Discharge Date: ${data.date_opened || '[DATE]'}</li>
        <li>Court: ${data.custom_details || '[BANKRUPTCY COURT]'}</li>
      </ul>
      
      <p><strong>THE VIOLATION:</strong></p>
      <p>This debt was legally discharged. Continuing to report a balance constitutes:</p>
      <ul>
        <li>An attempt to collect a discharged debt (violation of discharge injunction)</li>
        <li>Inaccurate credit reporting under FCRA § 1681e(b)</li>
        <li>Furnishing information known to be inaccurate under § 1681s-2</li>
      </ul>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Update balance to $0</li>
        <li>Add notation "Included in Bankruptcy" or "Discharged"</li>
        <li>Ensure no further collection activity</li>
        <li>Provide confirmation of corrections</li>
      </ol>
    `, data),
  },

  // ========================================================================
  // COLLECTION ACCOUNTS (10 templates)
  // ========================================================================
  {
    id: 'collection-no-contract',
    name: 'Collection: No Original Contract',
    description: 'Collection agency cannot produce original contract',
    category: 'collection',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - NO ORIGINAL CONTRACT EXISTS</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing the following collection account because the collector cannot produce the original signed contract:</p>
      
      <p><strong>DISPUTED COLLECTION:</strong></p>
      <ul>
        <li>Collection Agency: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Alleged Original Creditor: ${data.account_type || '[ORIGINAL CREDITOR]'}</li>
      </ul>
      
      <p><strong>VALIDATION FAILURE:</strong></p>
      <p>I sent a debt validation request to this collector on ${data.original_dispute_date || '[DATE]'}. They have failed to provide:</p>
      <ul>
        <li>A copy of the original signed contract</li>
        <li>Proof of assignment/purchase of the debt</li>
        <li>Complete accounting of the balance claimed</li>
      </ul>
      
      <p>Without the original contract, there is no proof I owe this debt. Under FCRA, you cannot report information that cannot be verified.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Request the original contract from the furnisher</li>
        <li>If they cannot provide it, delete this tradeline</li>
        <li>Provide confirmation of deletion</li>
      </ol>
    `, data),
  },

  {
    id: 'collection-wrong-amount',
    name: 'Collection: Inflated Amount',
    description: 'Collection showing wrong/inflated balance',
    category: 'collection',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - INFLATED COLLECTION AMOUNT</div>
      
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      
      <p>I am disputing the amount being reported on the following collection account:</p>
      
      <p><strong>COLLECTION ACCOUNT:</strong></p>
      <ul>
        <li>Collector: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Amount Reported: $${data.reported_balance?.toLocaleString() || '[REPORTED]'}</li>
        <li>Correct Amount: $${data.actual_balance?.toLocaleString() || '[ACTUAL]'}</li>
      </ul>
      
      <p><strong>THE DISCREPANCY:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p>Collectors often add unauthorized fees, interest, and charges that inflate the balance beyond what is legally owed. This inflated amount is inaccurate and must be corrected.</p>
      
      <p><strong>REQUESTED ACTIONS:</strong></p>
      <ol>
        <li>Verify the correct amount with documentation</li>
        <li>Update to reflect accurate balance</li>
        <li>Remove any unauthorized fees or charges</li>
        <li>Provide confirmation of correction</li>
      </ol>
    `, data),
  },

  // ========================================================================
  // COURT PREPARATION (10 templates - ALL PREMIUM)
  // ========================================================================
  {
    id: 'court-intent-to-sue',
    name: 'Intent to Sue Notice',
    description: 'Final notice before filing lawsuit',
    category: 'court',
    severity: 'high',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">NOTICE OF INTENT TO FILE LAWSUIT - FINAL DEMAND</div>
      
      <p><strong>SENT VIA CERTIFIED MAIL - RETURN RECEIPT REQUESTED</strong></p>
      
      <p>Dear ${data.bureau} Legal Department,</p>
      
      <p>This letter serves as formal notice that I intend to file a lawsuit against ${data.bureau} in United States District Court for violations of the Fair Credit Reporting Act (FCRA).</p>
      
      <p><strong>DISPUTE HISTORY:</strong></p>
      <ul>
        <li>Original Dispute Date: ${data.original_dispute_date || '[DATE]'}</li>
        <li>Account at Issue: ${data.creditor_name || '[CREDITOR]'} - ${data.account_number || '[ACCOUNT]'}</li>
        <li>Number of Disputes Filed: [NUMBER]</li>
        <li>Your Response: Failed to correct despite clear evidence of inaccuracy</li>
      </ul>
      
      <p><strong>FCRA VIOLATIONS:</strong></p>
      <ul>
        <li>15 U.S.C. § 1681e(b) - Failure to ensure maximum possible accuracy</li>
        <li>15 U.S.C. § 1681i - Failure to conduct reasonable reinvestigation</li>
        <li>15 U.S.C. § 1681i(a)(5)(A) - Failure to delete unverifiable information</li>
      </ul>
      
      <p><strong>DAMAGES SOUGHT:</strong></p>
      <ul>
        <li>Statutory damages: $100 - $1,000 per violation (15 U.S.C. § 1681n)</li>
        <li>Actual damages for harm to credit, lost opportunities, emotional distress</li>
        <li>Punitive damages for willful non-compliance</li>
        <li>Attorney fees and costs</li>
      </ul>
      
      <p><strong>FINAL OPPORTUNITY:</strong></p>
      <p>You have <strong>15 days</strong> from receipt of this letter to:</p>
      <ol>
        <li>Correct the inaccurate information</li>
        <li>Provide written confirmation of correction</li>
        <li>Compensate me for damages incurred</li>
      </ol>
      
      <p>If this matter is not resolved within 15 days, I will file suit without further notice. Discovery will be sought regarding your investigation procedures, training materials, and pattern of similar violations.</p>
      
      <p>Govern yourself accordingly.</p>
    `, data),
  },

  {
    id: 'court-demand-letter',
    name: 'Pre-Litigation Demand Letter',
    description: 'Formal demand before lawsuit',
    category: 'court',
    severity: 'high',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">PRE-LITIGATION DEMAND - FCRA VIOLATIONS</div>
      
      <p>Dear ${data.bureau} Legal Department,</p>
      
      <p>This letter constitutes a formal pre-litigation demand for your violations of the Fair Credit Reporting Act.</p>
      
      <p><strong>FACTUAL BACKGROUND:</strong></p>
      <p>${data.dispute_reason}</p>
      
      <p><strong>YOUR VIOLATIONS:</strong></p>
      <p>${data.specific_error || 'Multiple FCRA violations as documented in my dispute file.'}</p>
      
      <p><strong>DEMAND:</strong></p>
      <ol>
        <li>Immediate correction of all inaccurate information</li>
        <li>Compensation for actual damages suffered</li>
        <li>Payment of $[AMOUNT] to settle all claims</li>
      </ol>
      
      <p>This demand expires in 21 days. Failure to respond will result in the filing of a federal lawsuit.</p>
    `, data),
  },
];

// ============================================================================
// HELPER FUNCTIONS
// ============================================================================

export function getTemplatesByCategory(category: TemplateCategory): DisputeTemplate[] {
  return DISPUTE_TEMPLATES.filter(t => t.category === category);
}

export function getTemplateById(id: string): DisputeTemplate | undefined {
  return DISPUTE_TEMPLATES.find(t => t.id === id);
}

export function getFreeTemplates(): DisputeTemplate[] {
  return DISPUTE_TEMPLATES.filter(t => !t.premium);
}

export function getPremiumTemplates(): DisputeTemplate[] {
  return DISPUTE_TEMPLATES.filter(t => t.premium);
}

export function getTemplateCategories(): { value: TemplateCategory; label: string; count: number }[] {
  const categories: Record<TemplateCategory, string> = {
    basic: 'Basic Disputes',
    fcra: 'FCRA Violations',
    metro2: 'Metro 2 Errors',
    student_loan: 'Student Loans',
    cfpb: 'CFPB Complaints',
    validation: 'Debt Validation',
    cease_desist: 'Cease & Desist',
    rebuttal: 'Rebuttal Letters',
    goodwill: 'Goodwill Requests',
    court: 'Court Preparation',
    collection: 'Collections',
    identity: 'Identity Theft',
    inquiry: 'Hard Inquiries',
    medical: 'Medical Debt',
    bankruptcy: 'Bankruptcy',
  };
  
  return Object.entries(categories).map(([value, label]) => ({
    value: value as TemplateCategory,
    label,
    count: getTemplatesByCategory(value as TemplateCategory).length,
  }));
}

// ========================================================================
// ADDITIONAL BASIC TEMPLATES (10 more)
// ========================================================================
DISPUTE_TEMPLATES.push(
  {
    id: 'basic-wrong-credit-limit',
    name: 'Wrong Credit Limit',
    description: 'Credit limit is reported incorrectly',
    category: 'basic',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - INCORRECT CREDIT LIMIT</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>I am disputing the credit limit being reported on the following account:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Reported Limit: $${data.reported_balance?.toLocaleString() || '[REPORTED]'}</li>
        <li>Actual Limit: $${data.actual_balance?.toLocaleString() || '[ACTUAL]'}</li>
      </ul>
      <p><strong>Impact:</strong> An incorrect credit limit affects my utilization ratio, which is a major factor in credit scoring.</p>
      <p><strong>Requested Action:</strong> Please verify the correct credit limit with the creditor and update accordingly.</p>
    `, data),
  },
  {
    id: 'basic-wrong-high-balance',
    name: 'Wrong High Balance',
    description: 'Highest balance ever is incorrect',
    category: 'basic',
    severity: 'low',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - INCORRECT HIGH BALANCE</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The "high balance" or "highest balance" field on the following account is incorrect:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>Please investigate and correct this field.</p>
    `, data),
  },
  {
    id: 'basic-wrong-payment-amount',
    name: 'Wrong Monthly Payment',
    description: 'Monthly payment amount is wrong',
    category: 'basic',
    severity: 'low',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - INCORRECT MONTHLY PAYMENT</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The monthly payment amount on the following account is being reported incorrectly:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>Please verify with the creditor and update to reflect the accurate payment amount.</p>
    `, data),
  },
  {
    id: 'basic-wrong-open-date',
    name: 'Wrong Account Open Date',
    description: 'Date opened is incorrect',
    category: 'basic',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - INCORRECT ACCOUNT OPEN DATE</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The account open date is being reported incorrectly:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Date Reported: ${data.date_opened || '[REPORTED DATE]'}</li>
      </ul>
      <p>This affects the age of my credit history, which impacts my score. Please correct to the accurate open date.</p>
    `, data),
  },
  {
    id: 'basic-account-type-wrong',
    name: 'Wrong Account Type',
    description: 'Account type (revolving/installment) is wrong',
    category: 'basic',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - INCORRECT ACCOUNT TYPE</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The account type classification is incorrect:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>Account type affects how utilization is calculated. Please correct this classification.</p>
    `, data),
  },
  {
    id: 'basic-terms-wrong',
    name: 'Wrong Loan Terms',
    description: 'Loan terms (months) are incorrect',
    category: 'basic',
    severity: 'low',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - INCORRECT LOAN TERMS</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The loan terms on the following account are incorrect:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>Please verify and correct the term length.</p>
    `, data),
  },
  {
    id: 'basic-never-late',
    name: 'Never Late - Remove Late Marks',
    description: 'All payments were on time',
    category: 'basic',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - FALSE LATE PAYMENT REPORTING</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>I am disputing late payment notations on an account where I have <strong>NEVER been late</strong>:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>I have bank statements, payment confirmations, and other evidence proving all payments were made on time. These false late marks must be removed immediately.</p>
      <p>Please investigate thoroughly and remove all inaccurate late payment notations.</p>
    `, data),
  },
  {
    id: 'basic-authorized-user',
    name: 'Remove Authorized User Account',
    description: 'Account I was AU on, want removed',
    category: 'basic',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: REQUEST TO REMOVE AUTHORIZED USER ACCOUNT</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>I am requesting removal of the following account on which I was an authorized user:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>As an authorized user, I have no legal liability for this account. I have been removed from the account by the primary holder and request this tradeline be deleted from my credit file.</p>
    `, data),
  },
  {
    id: 'basic-joint-to-individual',
    name: 'Joint Account - Not My Responsibility',
    description: 'Joint account I should not be liable for',
    category: 'basic',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - JOINT ACCOUNT LIABILITY</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>I am disputing my liability on the following joint account:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>Please verify the contractual obligations and update reporting accordingly.</p>
    `, data),
  },
  {
    id: 'basic-refinanced',
    name: 'Refinanced Account Still Showing',
    description: 'Old loan shows balance after refinance',
    category: 'basic',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE - REFINANCED ACCOUNT STILL ACTIVE</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The following account was refinanced but is still showing as active with a balance:</p>
      <ul>
        <li>Original Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account Number: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Refinance Date: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>This account should show as "Paid - Closed" or "Refinanced" with a $0 balance. The current reporting creates a false impression of additional debt.</p>
    `, data),
  }
);

// ========================================================================
// ADDITIONAL FCRA TEMPLATES (10 more)
// ========================================================================
DISPUTE_TEMPLATES.push(
  {
    id: 'fcra-30-day-violation',
    name: 'FCRA 30-Day Response Violation',
    description: 'Bureau failed to respond within 30 days',
    category: 'fcra',
    fcra_section: '1681i(a)(1)',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: FCRA § 1681i(a)(1) VIOLATION - FAILURE TO RESPOND WITHIN 30 DAYS</div>
      <p>Dear ${data.bureau} Legal Department,</p>
      <p>On ${data.original_dispute_date || '[DATE]'}, I submitted a dispute via certified mail. More than 30 days have passed and you have failed to:</p>
      <ul>
        <li>Complete your reinvestigation</li>
        <li>Provide written notice of results</li>
        <li>Delete or modify the disputed information</li>
      </ul>
      <p>This is a per se violation of FCRA § 1681i(a)(1). I demand immediate deletion of the disputed item and preservation of all documents for litigation.</p>
    `, data),
  },
  {
    id: 'fcra-no-notice-results',
    name: 'FCRA No Notice of Results',
    description: 'Bureau never sent investigation results',
    category: 'fcra',
    fcra_section: '1681i(a)(6)',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: FCRA § 1681i(a)(6) VIOLATION - NO NOTICE OF RESULTS</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>Under FCRA § 1681i(a)(6), you are required to provide written notice of investigation results within 5 business days of completion. You have failed to provide this notice.</p>
      <p><strong>Original Dispute Date:</strong> ${data.original_dispute_date || '[DATE]'}</p>
      <p>Please provide the required notice immediately, including the results and a free copy of my updated report.</p>
    `, data),
  },
  {
    id: 'fcra-method-verification',
    name: 'FCRA Method of Verification Request',
    description: 'Demand details of how item was verified',
    category: 'fcra',
    fcra_section: '1681i(a)(7)',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: REQUEST FOR METHOD OF VERIFICATION - FCRA § 1681i(a)(7)</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>Under FCRA § 1681i(a)(7), I am entitled to receive a description of the procedure used to determine the accuracy of the disputed information.</p>
      <p>Please provide:</p>
      <ol>
        <li>The business name, address, and phone number of the furnisher</li>
        <li>A description of the reinvestigation procedure used</li>
        <li>Copies of all documents used in your verification</li>
      </ol>
    `, data),
  },
  {
    id: 'fcra-frivolous-wrongful',
    name: 'Dispute Wrongfully Deemed Frivolous',
    description: 'Bureau improperly rejected dispute as frivolous',
    category: 'fcra',
    fcra_section: '1681i(a)(3)',
    severity: 'high',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: IMPROPER FRIVOLOUS DETERMINATION - FCRA § 1681i(a)(3) VIOLATION</div>
      <p>Dear ${data.bureau} Legal Department,</p>
      <p>You have improperly determined my dispute to be "frivolous" in violation of FCRA § 1681i(a)(3). A dispute may only be deemed frivolous if it is "substantially similar" to a previous dispute.</p>
      <p>My dispute is NOT substantially similar because: ${data.dispute_reason}</p>
      <p>I demand you conduct a proper reinvestigation immediately.</p>
    `, data),
  },
  {
    id: 'fcra-mixed-file',
    name: 'FCRA Mixed File Violation',
    description: 'Someone else\'s info in my file',
    category: 'fcra',
    fcra_section: '1681e(b)',
    severity: 'high',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: MIXED FILE VIOLATION - FCRA § 1681e(b)</div>
      <p>Dear ${data.bureau} Legal Department,</p>
      <p>My credit file contains information belonging to another consumer, indicating a "mixed file" - a clear violation of your duty under FCRA § 1681e(b).</p>
      <p><strong>The Mixed Information:</strong> ${data.dispute_reason}</p>
      <p>This demonstrates a systemic failure in your matching procedures. Please immediately:</p>
      <ol>
        <li>Remove all information not belonging to me</li>
        <li>Review your file separation procedures</li>
        <li>Provide documentation of your matching logic</li>
      </ol>
    `, data),
  },
  {
    id: 'fcra-soft-inquiry-converted',
    name: 'Soft Inquiry Converted to Hard',
    description: 'Promotional inquiry became hard pull',
    category: 'fcra',
    fcra_section: '1681b(c)',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: UNAUTHORIZED HARD INQUIRY FROM PROMOTIONAL ACCESS</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>An entity that accessed my file for promotional purposes has been converted to or reported as a hard inquiry:</p>
      <ul>
        <li>Company: ${data.creditor_name || '[COMPANY]'}</li>
        <li>Date: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>I did not apply for credit with this company. This appears to have been a prescreened offer or promotional access that was incorrectly reported. Please correct this to a soft inquiry or remove entirely.</p>
    `, data),
  },
  {
    id: 'fcra-reseller-violation',
    name: 'FCRA Reseller Violation',
    description: 'Reseller reported inaccurate info',
    category: 'fcra',
    fcra_section: '1681e(d)',
    severity: 'high',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: RESELLER VIOLATION - FCRA § 1681e(d)</div>
      <p>Dear ${data.bureau} Legal Department,</p>
      <p>A reseller of your consumer reports has provided inaccurate information to a third party. Under FCRA § 1681e(d), resellers must maintain procedures to ensure accuracy.</p>
      <p><strong>Details:</strong> ${data.dispute_reason}</p>
      <p>Please investigate and take appropriate action against the reseller.</p>
    `, data),
  },
  {
    id: 'fcra-obsolete-bankruptcy',
    name: 'Bankruptcy Past 10 Years',
    description: 'Bankruptcy older than 10 years still showing',
    category: 'fcra',
    fcra_section: '1681c(a)(1)',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: OBSOLETE BANKRUPTCY - FCRA § 1681c(a)(1) VIOLATION</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>My credit report contains a bankruptcy that is more than 10 years old and must be removed under FCRA § 1681c(a)(1):</p>
      <ul>
        <li>Bankruptcy Type: ${data.account_type || '[CHAPTER 7/13]'}</li>
        <li>Filing Date: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>This bankruptcy is obsolete and must be deleted immediately.</p>
    `, data),
  },
  {
    id: 'fcra-obsolete-judgment',
    name: 'Judgment Past 7 Years',
    description: 'Civil judgment older than 7 years',
    category: 'fcra',
    fcra_section: '1681c(a)(2)',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: OBSOLETE CIVIL JUDGMENT - FCRA § 1681c(a)(2)</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>My credit report contains a civil judgment that exceeds the 7-year reporting period:</p>
      <ul>
        <li>Case/Judgment: ${data.creditor_name || '[CASE INFO]'}</li>
        <li>Date of Entry: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>Under FCRA § 1681c(a)(2), this obsolete judgment must be removed.</p>
    `, data),
  },
  {
    id: 'fcra-obsolete-tax-lien',
    name: 'Tax Lien Past 7 Years',
    description: 'Tax lien older than 7 years',
    category: 'fcra',
    fcra_section: '1681c(a)(3)',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: OBSOLETE TAX LIEN - FCRA § 1681c(a)(3)</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>My credit report contains a tax lien that exceeds the 7-year reporting period:</p>
      <ul>
        <li>Lien Amount: ${data.reported_balance || '[AMOUNT]'}</li>
        <li>Date Filed: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>Note: Paid tax liens have been removed from credit reports since 2018. This lien should not appear regardless. Please delete immediately.</p>
    `, data),
  }
);

// ========================================================================
// ADDITIONAL METRO 2 TEMPLATES (10 more)
// ========================================================================
DISPUTE_TEMPLATES.push(
  {
    id: 'metro2-field-15-blank',
    name: 'Metro 2 Field 15 Missing (Scheduled Payment)',
    description: 'Scheduled monthly payment field blank',
    category: 'metro2',
    metro2_field: 'Field 15',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: METRO 2 FIELD 15 OMISSION</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The Scheduled Monthly Payment Amount (Field 15) is missing on:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>This required field affects how the account is evaluated. Please require the furnisher to populate this field.</p>
    `, data),
  },
  {
    id: 'metro2-field-16-blank',
    name: 'Metro 2 Field 16 Missing (Actual Payment)',
    description: 'Actual payment amount field blank',
    category: 'metro2',
    metro2_field: 'Field 16',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: METRO 2 FIELD 16 OMISSION</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The Actual Payment Amount (Field 16) is missing on the following account:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>This omission creates an incomplete tradeline that may be scored differently than intended.</p>
    `, data),
  },
  {
    id: 'metro2-wrong-portfolio-type',
    name: 'Wrong Portfolio Type Code',
    description: 'Portfolio type indicator is wrong',
    category: 'metro2',
    metro2_field: 'Portfolio Type',
    severity: 'medium',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: INCORRECT METRO 2 PORTFOLIO TYPE</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The Portfolio Type Indicator is incorrect on:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>Portfolio Type codes: C=Line of Credit, I=Installment, M=Mortgage, O=Open, R=Revolving. Please correct.</p>
    `, data),
  },
  {
    id: 'metro2-wrong-ecoa',
    name: 'Wrong ECOA Code',
    description: 'Account ownership code is wrong',
    category: 'metro2',
    metro2_field: 'ECOA Code',
    severity: 'medium',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: INCORRECT ECOA CODE</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The ECOA (Equal Credit Opportunity Act) Code is incorrect:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>ECOA codes: 1=Individual, 2=Joint, 3=Authorized User, etc. Please verify and correct.</p>
    `, data),
  },
  {
    id: 'metro2-compliance-condition',
    name: 'Wrong Compliance Condition Code',
    description: 'Special compliance code missing or wrong',
    category: 'metro2',
    metro2_field: 'Compliance Condition',
    severity: 'high',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: INCORRECT COMPLIANCE CONDITION CODE</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The Compliance Condition Code on my account is missing or incorrect:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>This code indicates special circumstances (natural disaster, pandemic relief, etc.) that affect how the account should be evaluated.</p>
    `, data),
  },
  {
    id: 'metro2-wrong-original-amount',
    name: 'Wrong Original Loan Amount',
    description: 'Original loan/credit amount is wrong',
    category: 'metro2',
    metro2_field: 'Original Amount',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: INCORRECT ORIGINAL LOAN AMOUNT</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The Original Loan Amount is being reported incorrectly:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Reported Original Amount: $${data.reported_balance?.toLocaleString() || '[REPORTED]'}</li>
        <li>Actual Original Amount: $${data.actual_balance?.toLocaleString() || '[ACTUAL]'}</li>
      </ul>
      <p>Please correct to reflect the accurate original amount.</p>
    `, data),
  },
  {
    id: 'metro2-consumer-info-indicator',
    name: 'Wrong Consumer Information Indicator',
    description: 'Consumer info indicator incorrect',
    category: 'metro2',
    metro2_field: 'Consumer Info Indicator',
    severity: 'medium',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: INCORRECT CONSUMER INFORMATION INDICATOR</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The Consumer Information Indicator on my account is incorrect:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>This indicator provides important context about the account relationship.</p>
    `, data),
  },
  {
    id: 'metro2-payment-history-profile',
    name: 'Payment History Profile Errors',
    description: '24-month payment history is wrong',
    category: 'metro2',
    metro2_field: 'Payment History',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: INCORRECT PAYMENT HISTORY PROFILE</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The 24-month Payment History Profile contains errors:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>The payment history profile directly affects scoring. Please verify each month's status code and correct inaccuracies.</p>
    `, data),
  },
  {
    id: 'metro2-date-last-activity',
    name: 'Wrong Date of Last Activity',
    description: 'Last activity date is incorrect',
    category: 'metro2',
    metro2_field: 'Date Last Activity',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: INCORRECT DATE OF LAST ACTIVITY</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The Date of Last Activity is being reported incorrectly:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>This date affects how the account is aged and scored. Please correct.</p>
    `, data),
  },
  {
    id: 'metro2-interest-type',
    name: 'Wrong Interest Type Indicator',
    description: 'Fixed vs variable interest wrong',
    category: 'metro2',
    metro2_field: 'Interest Type',
    severity: 'low',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: INCORRECT INTEREST TYPE INDICATOR</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The Interest Type Indicator is incorrect:</p>
      <ul>
        <li>Creditor: ${data.creditor_name || '[CREDITOR]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>Please update to reflect whether this is a fixed or variable rate account.</p>
    `, data),
  }
);

// ========================================================================
// ADDITIONAL STUDENT LOAN TEMPLATES (8 more)
// ========================================================================
DISPUTE_TEMPLATES.push(
  {
    id: 'student-wrong-servicer',
    name: 'Wrong Student Loan Servicer',
    description: 'Servicer info is outdated after transfer',
    category: 'student_loan',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: INCORRECT STUDENT LOAN SERVICER</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>My student loan is showing the wrong servicer after a servicer transfer:</p>
      <ul>
        <li>Old Servicer Showing: ${data.creditor_name || '[OLD SERVICER]'}</li>
        <li>Current Servicer: ${data.account_type || '[NEW SERVICER]'}</li>
      </ul>
      <p>Please update to reflect the current servicer.</p>
    `, data),
  },
  {
    id: 'student-in-school-deferment',
    name: 'In-School Deferment Missing',
    description: 'Currently in school but not showing deferment',
    category: 'student_loan',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: MISSING IN-SCHOOL DEFERMENT STATUS</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>I am currently enrolled in school and my loans should be in In-School Deferment, but this is not being reported:</p>
      <ul>
        <li>Servicer: ${data.creditor_name || '[SERVICER]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
        <li>School Enrollment: ${data.date_opened || '[DATES]'}</li>
      </ul>
      <p>Please add the appropriate deferment code (D for Deferment or similar) and ensure no late payments are reported during this period.</p>
    `, data),
  },
  {
    id: 'student-forbearance-missing',
    name: 'Forbearance Status Missing',
    description: 'In forbearance but not reflected',
    category: 'student_loan',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: MISSING FORBEARANCE STATUS</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>My student loan is in approved forbearance but this is not being reported correctly:</p>
      <ul>
        <li>Servicer: ${data.creditor_name || '[SERVICER]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Forbearance Period: ${data.date_opened || '[DATES]'}</li>
      </ul>
      <p>Please add the appropriate forbearance Special Comment Code.</p>
    `, data),
  },
  {
    id: 'student-pslf-tracking',
    name: 'PSLF Payment Count Wrong',
    description: 'Public Service Loan Forgiveness tracking issue',
    category: 'student_loan',
    severity: 'medium',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: PSLF QUALIFYING PAYMENT DOCUMENTATION</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>My student loan reporting does not accurately reflect my status in the Public Service Loan Forgiveness program:</p>
      <ul>
        <li>Servicer: ${data.creditor_name || '[SERVICER]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>Please ensure reporting accurately reflects my on-time payment status while enrolled in PSLF.</p>
    `, data),
  },
  {
    id: 'student-consolidation',
    name: 'Consolidation Reporting Error',
    description: 'Consolidated loans still showing separately',
    category: 'student_loan',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: STUDENT LOAN CONSOLIDATION REPORTING ERROR</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>I consolidated my student loans, but the pre-consolidation loans are still showing as active:</p>
      <ul>
        <li>Consolidation Date: ${data.date_opened || '[DATE]'}</li>
        <li>Old Loans Still Showing: ${data.dispute_reason}</li>
      </ul>
      <p>The old loans should show "Closed - Paid through consolidation" or similar, with $0 balance. They should not show as active separate debts.</p>
    `, data),
  },
  {
    id: 'student-save-plan',
    name: 'SAVE Plan Reporting Error',
    description: 'SAVE repayment plan not reflected',
    category: 'student_loan',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: SAVE PLAN REPORTING ISSUE</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>I am enrolled in the SAVE (Saving on a Valuable Education) Plan, but my account is not being reported correctly:</p>
      <ul>
        <li>Servicer: ${data.creditor_name || '[SERVICER]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>While on an income-driven plan, my payments should show as on-time if made according to the plan terms.</p>
    `, data),
  },
  {
    id: 'student-discharge-not-reflected',
    name: 'Loan Discharge Not Reflected',
    description: 'Discharged loan still showing balance',
    category: 'student_loan',
    severity: 'high',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: STUDENT LOAN DISCHARGE NOT REFLECTED</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>My student loan was discharged but is still showing as an active debt:</p>
      <ul>
        <li>Servicer: ${data.creditor_name || '[SERVICER]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Discharge Type: ${data.account_type || '[TYPE - TPD/Closed School/Borrower Defense/etc.]'}</li>
        <li>Discharge Date: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>Please update to show $0 balance and appropriate discharge notation.</p>
    `, data),
  },
  {
    id: 'student-interest-cap',
    name: 'Interest Capitalization Error',
    description: 'Interest was capitalized incorrectly',
    category: 'student_loan',
    severity: 'medium',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: INCORRECT INTEREST CAPITALIZATION</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The balance on my student loan reflects improper interest capitalization:</p>
      <ul>
        <li>Servicer: ${data.creditor_name || '[SERVICER]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Reported Balance: $${data.reported_balance?.toLocaleString() || '[REPORTED]'}</li>
        <li>Correct Balance: $${data.actual_balance?.toLocaleString() || '[ACTUAL]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>Please verify the proper principal balance with the servicer.</p>
    `, data),
  }
);

// ========================================================================
// ADDITIONAL COLLECTION TEMPLATES (10 more)
// ========================================================================
DISPUTE_TEMPLATES.push(
  {
    id: 'collection-zombie-debt',
    name: 'Zombie Debt (Time-Barred)',
    description: 'Debt past statute of limitations',
    category: 'collection',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: TIME-BARRED DEBT - DEMAND FOR REMOVAL</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The following collection is for a debt that is past the statute of limitations:</p>
      <ul>
        <li>Collector: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Original Creditor: ${data.account_type || '[ORIGINAL]'}</li>
        <li>Date of Last Activity: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>The statute of limitations in my state (${data.state}) has expired. While technically reportable under FCRA, this debt is legally unenforceable. Please verify the age of this debt.</p>
    `, data),
  },
  {
    id: 'collection-paid-delete-agreement',
    name: 'Pay for Delete Not Honored',
    description: 'Collector agreed to delete but didn\'t',
    category: 'collection',
    severity: 'high',
    premium: true,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: FAILURE TO HONOR PAY-FOR-DELETE AGREEMENT</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>I have a written agreement with the following collector to delete reporting upon payment, which was not honored:</p>
      <ul>
        <li>Collector: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Payment Date: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>I have documentation of this agreement. Please contact the collector to confirm and process deletion.</p>
    `, data),
  },
  {
    id: 'collection-wrong-creditor',
    name: 'Wrong Original Creditor',
    description: 'Original creditor info is wrong',
    category: 'collection',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: INCORRECT ORIGINAL CREDITOR INFORMATION</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The original creditor information on this collection is incorrect:</p>
      <ul>
        <li>Collector: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Original Creditor Shown: ${data.account_type || '[WRONG]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>Please verify the original creditor name.</p>
    `, data),
  },
  {
    id: 'collection-settled-wrong',
    name: 'Settled Account Wrong Status',
    description: 'Settled collection not showing settled',
    category: 'collection',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: SETTLED COLLECTION NOT SHOWING CORRECT STATUS</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>I settled this collection account for less than the full balance, but it is not showing the correct settled status:</p>
      <ul>
        <li>Collector: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Settlement Date: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>Please update to show "Settled" or "Settled for Less Than Full Balance" with $0 balance.</p>
    `, data),
  },
  {
    id: 'collection-utility-wrong',
    name: 'Utility Collection Dispute',
    description: 'Utility bill in collections incorrectly',
    category: 'collection',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE UTILITY COLLECTION</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>I am disputing a utility collection that is inaccurate:</p>
      <ul>
        <li>Collector: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Utility Company: ${data.account_type || '[UTILITY]'}</li>
        <li>Amount: $${data.reported_balance?.toLocaleString() || '[AMOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>Please investigate and correct.</p>
    `, data),
  },
  {
    id: 'collection-rent-dispute',
    name: 'Rental/Lease Collection Dispute',
    description: 'Apartment/rental collection is wrong',
    category: 'collection',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE RENTAL COLLECTION</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>I am disputing a rental/lease-related collection:</p>
      <ul>
        <li>Collector: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Property/Landlord: ${data.account_type || '[PROPERTY]'}</li>
        <li>Amount Claimed: $${data.reported_balance?.toLocaleString() || '[AMOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>I have documentation showing this amount is disputed or incorrect.</p>
    `, data),
  },
  {
    id: 'collection-gym-membership',
    name: 'Gym/Membership Collection',
    description: 'Gym or membership fee in collections',
    category: 'collection',
    severity: 'low',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE GYM/MEMBERSHIP COLLECTION</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>I am disputing a gym or membership collection:</p>
      <ul>
        <li>Collector: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Original Company: ${data.account_type || '[GYM/COMPANY]'}</li>
        <li>Amount: $${data.reported_balance?.toLocaleString() || '[AMOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>I properly cancelled this membership per the contract terms.</p>
    `, data),
  },
  {
    id: 'collection-insurance-premium',
    name: 'Insurance Premium Collection',
    description: 'Insurance premium in collections',
    category: 'collection',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE INSURANCE COLLECTION</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>I am disputing an insurance-related collection:</p>
      <ul>
        <li>Collector: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Insurance Company: ${data.account_type || '[INSURER]'}</li>
        <li>Amount: $${data.reported_balance?.toLocaleString() || '[AMOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
    `, data),
  },
  {
    id: 'collection-telecom',
    name: 'Phone/Internet Collection',
    description: 'Telecom bill in collections',
    category: 'collection',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DISPUTE TELECOM COLLECTION</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>I am disputing a phone/internet/cable collection:</p>
      <ul>
        <li>Collector: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Provider: ${data.account_type || '[PROVIDER]'}</li>
        <li>Amount: $${data.reported_balance?.toLocaleString() || '[AMOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>This bill includes disputed charges and/or equipment return issues.</p>
    `, data),
  },
  {
    id: 'collection-multiple-agencies',
    name: 'Same Debt Multiple Collectors',
    description: 'Debt showing from multiple collectors',
    category: 'collection',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: SAME DEBT REPORTED BY MULTIPLE COLLECTORS</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The same debt is being reported by multiple collection agencies:</p>
      <ul>
        <li>Original Debt: ${data.account_type || '[ORIGINAL]'}</li>
        <li>Collectors Reporting: ${data.dispute_reason}</li>
      </ul>
      <p>This constitutes duplicate reporting and artificially inflates my debt load. Please remove all but the legitimate current holder of the debt.</p>
    `, data),
  }
);

// ========================================================================
// ADDITIONAL GOODWILL TEMPLATES (5 more)
// ========================================================================
DISPUTE_TEMPLATES.push(
  {
    id: 'goodwill-military',
    name: 'Goodwill: Military Service',
    description: 'Request removal due to deployment',
    category: 'goodwill',
    severity: 'low',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">GOODWILL REQUEST - MILITARY SERVICE</div>
      <p>Dear ${data.creditor_name || 'Customer Service'},</p>
      <p>I am a member of the United States Armed Forces requesting a goodwill adjustment. During my deployment/training, I experienced payment difficulties:</p>
      <ul>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Service Dates: ${data.date_opened || '[DATES]'}</li>
      </ul>
      <p>I have since brought the account current and maintained excellent standing. Given my service to our country, I respectfully request removal of the late notations.</p>
      <p>Thank you for your consideration and support of our military members.</p>
    `, data),
  },
  {
    id: 'goodwill-medical-emergency',
    name: 'Goodwill: Medical Emergency',
    description: 'Request removal due to medical crisis',
    category: 'goodwill',
    severity: 'low',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">GOODWILL REQUEST - MEDICAL EMERGENCY</div>
      <p>Dear ${data.creditor_name || 'Customer Service'},</p>
      <p>I am requesting a goodwill adjustment due to a medical emergency that temporarily impacted my ability to manage payments:</p>
      <ul>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>I have fully recovered and brought all accounts current. This was an isolated incident caused by circumstances beyond my control.</p>
      <p>I would be deeply grateful for your compassion in removing these marks.</p>
    `, data),
  },
  {
    id: 'goodwill-job-loss',
    name: 'Goodwill: Job Loss Recovery',
    description: 'Request removal after job loss period',
    category: 'goodwill',
    severity: 'low',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">GOODWILL REQUEST - EMPLOYMENT RECOVERY</div>
      <p>Dear ${data.creditor_name || 'Customer Service'},</p>
      <p>I am requesting a goodwill adjustment following a period of unemployment:</p>
      <ul>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Unemployment Period: ${data.date_opened || '[DATES]'}</li>
      </ul>
      <p>I have since found stable employment and brought my account current. The late payments occurred during a difficult period but do not reflect my commitment to financial responsibility.</p>
    `, data),
  },
  {
    id: 'goodwill-natural-disaster',
    name: 'Goodwill: Natural Disaster',
    description: 'Request removal due to disaster impact',
    category: 'goodwill',
    severity: 'low',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">GOODWILL REQUEST - NATURAL DISASTER IMPACT</div>
      <p>Dear ${data.creditor_name || 'Customer Service'},</p>
      <p>I am requesting a goodwill adjustment due to the impact of a natural disaster (${data.specific_error || 'hurricane/flood/fire/etc.'}):</p>
      <ul>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Disaster Date: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
      <p>I have since recovered and restored all payments to current. Given the extraordinary circumstances, I hope you will consider this goodwill request.</p>
    `, data),
  },
  {
    id: 'goodwill-long-customer',
    name: 'Goodwill: Long-Time Customer',
    description: 'Leverage long relationship for removal',
    category: 'goodwill',
    severity: 'low',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">GOODWILL REQUEST - LOYAL CUSTOMER</div>
      <p>Dear ${data.creditor_name || 'Customer Service'},</p>
      <p>I have been a loyal customer for ${data.specific_error || '[X years]'} and am requesting a goodwill adjustment:</p>
      <ul>
        <li>Account: ${data.account_number || '[ACCOUNT]'}</li>
        <li>Customer Since: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>Over our long relationship, this is the only blemish on an otherwise perfect payment history. I value our relationship and hope you can extend this courtesy to a long-time customer.</p>
    `, data),
  }
);

// ========================================================================
// ADDITIONAL INQUIRY TEMPLATES (5 more)
// ========================================================================
DISPUTE_TEMPLATES.push(
  {
    id: 'inquiry-identity-theft',
    name: 'Inquiry: Identity Theft Related',
    description: 'Fraudulent inquiry from ID theft',
    category: 'inquiry',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: FRAUDULENT INQUIRY - IDENTITY THEFT</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The following inquiry is the result of identity theft and must be removed:</p>
      <ul>
        <li>Company: ${data.creditor_name || '[COMPANY]'}</li>
        <li>Date: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>I have filed an identity theft report and this inquiry was not authorized by me. Please block this inquiry pursuant to FCRA § 1681c-2.</p>
    `, data),
  },
  {
    id: 'inquiry-same-creditor-multiple',
    name: 'Multiple Inquiries Same Creditor',
    description: 'Multiple pulls that should be one',
    category: 'inquiry',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: MULTIPLE INQUIRIES - SHOULD BE COMBINED</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The following creditor has multiple inquiries that should be combined into one:</p>
      <ul>
        <li>Company: ${data.creditor_name || '[COMPANY]'}</li>
        <li>Inquiry Dates: ${data.dispute_reason}</li>
      </ul>
      <p>These inquiries were all for the same credit application (rate shopping) and should count as a single inquiry per FICO and VantageScore guidelines.</p>
    `, data),
  },
  {
    id: 'inquiry-employment-as-hard',
    name: 'Employment Inquiry Shown as Hard',
    description: 'Employment check showing as hard pull',
    category: 'inquiry',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: EMPLOYMENT INQUIRY MISCLASSIFIED</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>An employment-related inquiry is incorrectly showing as a hard inquiry:</p>
      <ul>
        <li>Company: ${data.creditor_name || '[EMPLOYER]'}</li>
        <li>Date: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>Employment background checks should not appear as hard inquiries. Please reclassify or remove.</p>
    `, data),
  },
  {
    id: 'inquiry-insurance-as-hard',
    name: 'Insurance Inquiry as Hard Pull',
    description: 'Insurance quote showing as hard inquiry',
    category: 'inquiry',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: INSURANCE INQUIRY MISCLASSIFIED</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>An insurance quote inquiry is incorrectly showing as a hard inquiry:</p>
      <ul>
        <li>Company: ${data.creditor_name || '[INSURER]'}</li>
        <li>Date: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>Insurance quotes and underwriting inquiries should be soft pulls. Please correct this classification.</p>
    `, data),
  },
  {
    id: 'inquiry-duplicate-removal',
    name: 'Duplicate Inquiries',
    description: 'Same inquiry appearing twice',
    category: 'inquiry',
    severity: 'low',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: DUPLICATE INQUIRY</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The same inquiry is appearing multiple times on my report:</p>
      <ul>
        <li>Company: ${data.creditor_name || '[COMPANY]'}</li>
        <li>Dates Appearing: ${data.dispute_reason}</li>
      </ul>
      <p>Please remove the duplicate entry.</p>
    `, data),
  }
);

// ========================================================================
// ADDITIONAL MEDICAL DEBT TEMPLATES (5 more)
// ========================================================================
DISPUTE_TEMPLATES.push(
  {
    id: 'medical-insurance-should-pay',
    name: 'Medical: Insurance Should Have Paid',
    description: 'Bill that insurance was supposed to cover',
    category: 'medical',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: MEDICAL COLLECTION - INSURANCE BILLING ERROR</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>This medical collection should have been covered by my insurance:</p>
      <ul>
        <li>Collector: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Medical Provider: ${data.account_type || '[PROVIDER]'}</li>
        <li>Amount: $${data.reported_balance?.toLocaleString() || '[AMOUNT]'}</li>
      </ul>
      <p>This bill was improperly billed to me instead of my insurance company. I am disputing with the provider and insurance. Please investigate.</p>
    `, data),
  },
  {
    id: 'medical-under-500',
    name: 'Medical Debt Under $500',
    description: 'Small medical debt that shouldn\'t report',
    category: 'medical',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: MEDICAL DEBT UNDER $500 - MUST BE REMOVED</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The following medical debt is under $500 and must be removed per 2023 credit reporting changes:</p>
      <ul>
        <li>Collector: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Amount: $${data.reported_balance?.toLocaleString() || '[AMOUNT]'}</li>
      </ul>
      <p>As of 2023, medical debts under $500 cannot appear on credit reports. Please remove immediately.</p>
    `, data),
  },
  {
    id: 'medical-paid-still-showing',
    name: 'Paid Medical Debt Still Showing',
    description: 'Medical debt was paid but still reports',
    category: 'medical',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: PAID MEDICAL DEBT - MUST BE REMOVED</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The following medical debt has been paid and must be removed:</p>
      <ul>
        <li>Collector: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Provider: ${data.account_type || '[PROVIDER]'}</li>
        <li>Payment Date: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>As of 2023, paid medical debts cannot appear on credit reports. Please remove immediately.</p>
    `, data),
  },
  {
    id: 'medical-too-soon',
    name: 'Medical Debt Reported Too Soon',
    description: 'Medical debt reported before 1 year wait',
    category: 'medical',
    severity: 'high',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: MEDICAL DEBT REPORTED PREMATURELY</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>This medical debt was reported before the required 1-year waiting period:</p>
      <ul>
        <li>Collector: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Provider: ${data.account_type || '[PROVIDER]'}</li>
        <li>Date of Service: ${data.date_opened || '[DATE]'}</li>
      </ul>
      <p>Medical debts cannot be reported until 1 year after the first delinquency. This was reported prematurely and must be removed.</p>
    `, data),
  },
  {
    id: 'medical-wrong-amount',
    name: 'Medical: Wrong Amount',
    description: 'Medical collection amount is wrong',
    category: 'medical',
    severity: 'medium',
    premium: false,
    generateLetter: (data) => wrapInHTML(`
      <div class="subject">RE: INCORRECT MEDICAL COLLECTION AMOUNT</div>
      <p>Dear ${data.bureau} Consumer Relations Department,</p>
      <p>The amount on this medical collection is incorrect:</p>
      <ul>
        <li>Collector: ${data.creditor_name || '[COLLECTOR]'}</li>
        <li>Amount Reported: $${data.reported_balance?.toLocaleString() || '[REPORTED]'}</li>
        <li>Correct Amount: $${data.actual_balance?.toLocaleString() || '[ACTUAL]'}</li>
      </ul>
      <p>${data.dispute_reason}</p>
    `, data),
  }
);

// Total template count
export const TOTAL_TEMPLATES = DISPUTE_TEMPLATES.length;
export const FREE_TEMPLATE_COUNT = getFreeTemplates().length;
export const PREMIUM_TEMPLATE_COUNT = getPremiumTemplates().length;
